<p-toast></p-toast>
<div class="checkout">
  <div>
    <p-button
      label="Back to cart"
      icon="pi pi-arrow-left"
      (onClick)="backToCart()"></p-button>
  </div>
</div>
<div class="grid checkout-form">
  <div class="col-8">
    <form [formGroup]="checkoutFormGroup">
      <div class="grid p-fluid formgrid">
        <div class="field col-4">
          <label for="name">Name</label>
          <input formControlName="name" id="name" type="text" pInputText/>
          <small
            *ngIf="(checkoutForm['name'].invalid) && (isSubmitted || checkoutForm['name'].dirty)"
            class="p-error">
            Name is required
          </small>
        </div>
        <div class="field col-4">
          <label for="email">Email</label>
          <input formControlName="email" id="email" type="text" pInputText/>
          <small
            *ngIf="(checkoutForm['email'].invalid) && (isSubmitted || checkoutForm['email'].dirty)"
            class="p-error">
            <span *ngIf="checkoutForm['email'].errors?.['required']">Email is required</span>
            <span *ngIf="checkoutForm['email'].errors?.['email']">Email is invalid</span>
          </small>
        </div>
        <div class="field col-4">
          <label for="phone">Phone</label>
          <p-inputMask
            formControlName="phone"
            id="phone"
            mask="+9 (999) 999-9999"
            placeholder="+9 (999) 999-9999">
          </p-inputMask>
          <small
            *ngIf="(checkoutForm['phone'].invalid) && (isSubmitted || checkoutForm['phone'].dirty)"
            class="p-error">
            Phone is required
          </small>
        </div>
      </div>
      <div class="grid p-fluid formgrid">
        <div class="field col-4">
          <label for="street">Street</label>
          <input formControlName="street" id="street" type="text" pInputText/>
          <small
            *ngIf="(checkoutForm['street'].invalid) && (isSubmitted || checkoutForm['street'].dirty)"
            class="p-error">
            Street is required
          </small>
        </div>
        <div class="field col-4">
          <label for="apartment">Apartment</label>
          <input formControlName="apartment" id="apartment" type="text" pInputText/>
          <small
            *ngIf="(checkoutForm['apartment'].invalid) && (isSubmitted || checkoutForm['apartment'].dirty)"
            class="p-error">
            Apartment is required
          </small>
        </div>
        <div class="field col-4">
          <label for="zip">Zip Code</label>
          <input formControlName="zip" id="zip" type="text" pInputText/>
          <small
            *ngIf="(checkoutForm['zip'].invalid) && (isSubmitted || checkoutForm['zip'].dirty)"
            class="p-error">
            Zip is required
          </small>
        </div>
        <div class="field col-4">
          <label for="city">City</label>
          <input formControlName="city" id="city" type="text" pInputText/>
          <small
            *ngIf="(checkoutForm['city'].invalid) && (isSubmitted || checkoutForm['city'].dirty)"
            class="p-error">
            City is required
          </small>
        </div>
        <div class="field col-4">
          <label for="country">Country</label>
          <p-dropdown
            formControlName="country"
            id="country"
            optionLabel="name"
            optionValue="id"
            [options]="countries"
            [filter]="true"
            filterBy="name"
            placeholder="Select a country">
          </p-dropdown>
          <small
            *ngIf="(checkoutForm['country'].invalid) && (isSubmitted || checkoutForm['country'].dirty)"
            class="p-error">
            Country is required
          </small>
        </div>
      </div>
    </form>
  </div>
  <div class="col-4 flex flex-column">
    <ltviz-orders-order-summary class="mb-4"></ltviz-orders-order-summary>
    <div class="checkout-button">
      <p-button label="Place Order" styleClass="w-full" (onClick)="placeOrder()"></p-button>
    </div>
  </div>
</div>
